<% title @evaluate.practice.name %>

<% if usuario_signed_in? %>
  <% if current_usuario.admin? or current_usuario.id == @evaluate.practice.usuario.id %>
    <%= link_to t(:send_photo), new_practice_midia_path(@evaluate), :class => "btn btn-warning", :style => "float:right;" %>
  <% end %>
<% end %>

<br><br><br>

<ul class="nav nav-tabs flex-column flex-sm-row">
  <li class="nav-item">
    <%= link_to truncate(@evaluate.practice.local.nome, length: 8), local_path(@evaluate.practice.local), title: @evaluate.practice.local.nome,  :class => "nav-link" %>
  </li>
  <li class="nav-item">
    <%= link_to @evaluate.practice.name.truncate(10) , practice_path(@evaluate.practice), :class => "nav-link" %>
  </li>
  <li class="nav-item">
    <%= link_to t(:what_you_do), practice_what_you_do_path(@evaluate.practice, @evaluate.practice.what_you_do), :class => "nav-link" %>
  </li>
  <li class="nav-item">
    <%= link_to t(:characterise), practice_characterise_path(@evaluate.practice, @evaluate.practice.characterise), :class => "nav-link" %>
  </li>
  <li class="nav-item">
    <%= link_to t(:evaluate), practice_evaluate_path(@evaluate.practice, @evaluate.practice.evaluate), :class => "nav-link active" %>
  </li>
  <li class="nav-item">
    <%= link_to t(:acknowledge), practice_acknowledge_path(@evaluate.practice, @evaluate.practice.acknowledge), :class => "nav-link" %>
  </li>
  <li class="nav-item">
    <%= link_to "#{t(:gallery)} (#{@evaluate.practice.midias.count})", practice_gallery_path(@evaluate.practice), :class => "nav-link", :style => "color: red !important" %>
  </li>
</ul>

<br>

<div class="tab-content" style="min-height: 64px;">
  <div class="tab-pane active">
    <br>
    <% if @evaluate.general_performance_of_practice.empty? and
      @evaluate.unintended_positive_side_effects_of_practice.empty? and
      @evaluate.unintended_negative_side_effect_of_practice.empty? and
      @evaluate.knowledge_and_skills_required_for_practice.empty? and
      @evaluate.labour_required_for_practice.empty? and
      @evaluate.cost_associated_with_practice.empty? and
      @evaluate.system_integrity_requirements.empty? and
      @evaluate.system_integrity_effects.empty? and
      @evaluate.climate_change_vulnerability_effects.empty? and
      @evaluate.time_requirements %>
      <h3><%= t(:no_data_has_been_registered_so_far) %>
        <% if usuario_signed_in? %>
          <% if current_usuario.admin? or current_usuario.id == @evaluate.practice.usuario.id %>
            <%= link_to t(:register), edit_practice_evaluate_path(@evaluate.practice, @evaluate) %>
          <% end %>
        <% end %>
      </h3>
    <% else %>
      <% if @evaluate.general_performance_of_practice and @evaluate.general_performance_of_practice .length() > 0 %>
        <div class="practices-box bg-light"><%= "<h2>#{t(:general_performance_of_practice)}</h2><div class='text-box'>#{simple_format (h @evaluate.general_performance_of_practice).gsub(URI.regexp, '<a href="\0">\0</a>')}</div>".html_safe %></div>
      <% end %>

      <% if @evaluate.unintended_positive_side_effects_of_practice and @evaluate.unintended_positive_side_effects_of_practice .length() > 0%>
        <%= "<h2>#{t(:unintended_positive_side_effects_of_practice)}</h2><div class='text-box'>#{simple_format (h @evaluate.unintended_positive_side_effects_of_practice).gsub(URI.regexp, '<a href="\0">\0</a>')}</div>".html_safe %>
      <% end %>

      <% if @evaluate.unintended_negative_side_effect_of_practice and @evaluate.unintended_negative_side_effect_of_practice .length() > 0%>
        <div class="practices-box bg-light"><%= "<h2>#{t(:unintended_negative_side_effect_of_practice)}</h2><div class='text-box'>#{simple_format (h @evaluate.unintended_negative_side_effect_of_practice).gsub(URI.regexp, '<a href="\0">\0</a>')}</div>".html_safe %></div>
      <% end %>

      <% if @evaluate.knowledge_and_skills_required_for_practice and @evaluate.knowledge_and_skills_required_for_practice .length() > 0%>
        <%= "<h2>#{t(:knowledge_and_skills_required_for_practice)}</h2><div class='text-box'>#{simple_format (h @evaluate.knowledge_and_skills_required_for_practice).gsub(URI.regexp, '<a href="\0">\0</a>')}</div>".html_safe %>
      <% end %>

      <% if @evaluate.labour_required_for_practice and @evaluate.labour_required_for_practice .length() > 0%>
        <div class="practices-box bg-light"><%= "<h2>#{t(:labour_required_for_practice)}</h2><div class='text-box'>#{simple_format (h @evaluate.labour_required_for_practice).gsub(URI.regexp, '<a href="\0">\0</a>')}</div>".html_safe %></div>
      <% end %>

      <% if @evaluate.cost_associated_with_practice and @evaluate.cost_associated_with_practice .length() > 0%>
        <%= "<h2>#{t(:cost_associated_with_practice)}</h2><div class='text-box'>#{simple_format (h @evaluate.cost_associated_with_practice).gsub(URI.regexp, '<a href="\0">\0</a>')}</div>".html_safe %>
      <% end %>

      <% if @evaluate.system_integrity_requirements and @evaluate.system_integrity_requirements .length() > 0%>
        <div class="practices-box bg-light"><%= "<h2>#{t(:system_integrity_requirements)}</h2><div class='text-box'>#{simple_format (h @evaluate.system_integrity_requirements).gsub(URI.regexp, '<a href="\0">\0</a>')}</div>".html_safe %></div>
      <% end %>

      <% if @evaluate.system_integrity_effects and @evaluate.system_integrity_effects .length() > 0%>
        <%= "<h2>#{t(:system_integrity_effects)}</h2><div class='text-box'>#{simple_format (h @evaluate.system_integrity_effects).gsub(URI.regexp, '<a href="\0">\0</a>')}</div>".html_safe %>
      <% end %>

      <% if @evaluate.climate_change_vulnerability_effects and @evaluate.climate_change_vulnerability_effects .length() > 0%>
        <div class="practices-box bg-light"><%= "<h2>#{t(:climate_change_vulnerability_effects)}</h2><div class='text-box'>#{simple_format (h @evaluate.climate_change_vulnerability_effects).gsub(URI.regexp, '<a href="\0">\0</a>')}</div>".html_safe %></div>
      <% end %>

      <% if @evaluate.time_requirements and @evaluate.time_requirements .length() > 0 %>
        <%= "<h2>#{t(:time_requirements)}</h2><div class='text-box'>#{simple_format (h @evaluate.time_requirements).gsub(URI.regexp, '<a href="\0">\0</a>')}</div>".html_safe %>
      <% end %>

      <% if usuario_signed_in? %>
        <% if current_usuario.admin? or current_usuario.id == @evaluate.practice.usuario.id %>
          <br><br>
          <div id="practice-footer">
            <div class="form-actions">
              <%= link_to t(:edit), edit_practice_evaluate_path(@evaluate.practice, @evaluate), :class => 'btn btn-success' %>
            </div>
          </div>
        <% end %>
      <% end %>
      <br><br>
    <% end %>
  </div>
</div>

